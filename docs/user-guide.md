# Mir User Guide

## What is Mir?

Mir is a new way to interface with large language models. It is currently _work-in-progress_.

## Configuration

### How do I configure settings?

The Settings panel can be opened using the gear icon in the top right of the application window, or the "Settings..." menu option in the Application menu.

The Settings panel is shown automatically on app launch until a connection is configured.

### How do I connect Mir to an API?

Open Settings and in the Connection section enter the base API URL (OpenAI `OPENAI_BASE_URL` style). Add the API key if the endpoint requires one.

The base URL should look like

```sh
https://api.openai.com/v1
```

Mir will call the `/chat/completions` path on that base URL. This is the only API endpoint the app currently uses.

Most inference providers, including OpenAI itself, provide support for this so called "Chat completion" endpoint (Anthropic is the notable exception).

You can also optionally specify a model name in Settings (for example `gpt-5.2`). The placeholder in the input field is only an example value, not a default that Mir sends automatically. Depending on your inference provider, the model name might be required or optional (if the inference provider has a default model).

The base URL and model is saved on your device so you do not need to re-enter them. The API key is also stored, but using secure storage.

### Where is the API key stored?

If secure storage is available on your device, Mir encrypts your key and saves it on your devices' secure storage so that you do not have to re-enter it each time.

If secure storage is not available, Mir keeps your key only for the current session. The key is cleared when the app closes.

### What data is sent to the API?

Mir sends the current conversation context to the configured endpoint in a chat-completions format, along with your API key if provided.

### Will my settings sync across devices?

Not yet. Sync is planned and will use end-to-end encryption when it is introduced.

### How do I clear my key?

Delete the API key from the Connection section. If secure storage is available, Mir will also remove the saved entry.

## Primitives

### Underlying

LLMs (as of today) take a string of input tokens, and generate a string of output tokens.

A common API interface that has _pseudo_-standardized over this mechanism is to consider the input as a sequence of "messages" (where each message is a string of tokens), and then treat the output as just another message. Then output of the previous interaction (a message) simply becomes part of the input for the next interaction (a sequence of messages).

These input messages are called "context".

What goes into context is entirely up to our imagination.

### Mir

So the underlying primitives that Mir deals with are _messages_ and _context_. These are roughly mapped over from the Mir primitives, _blocks_ and _collections_.

* Blocks are immutable strings of tokens, written by a human, generated by an LLM, or conjured by some other alchemy. These map cleanly to _messages_.

* However, the context is not reified until the actual generation. We have an infinite field of blocks which can be combined in arbitrary ways, but to keep things manageable and tangible, blocks are grouped into collections, and when forming the _context_, a subset of blocks from the collection are used.

## Collections

A new collection can be started using the New Collection button in the top bar, or via File -> New Collection (`Ctrl + N` on Linux/Windows, `Cmd + N` on macOS).

The list of collections can be seen in the Collections tab of the sidebar (Use `Ctrl + E` on Linux/Windows, `Cmd + E` on macOS to quickly toggle it on and off).

## Blocks

A new block can be added to a collection using the composer at the bottom of the main pane.

Tokens you add form a new block, are folded into the current context as a message, the resultant context is submitted to the model for generation, and the model’s continuation is stored as a new block.

### Composing blocks

Compose a block in the composer area. Use the Generate button to add it into the context and trigger the generation of a continuation.

You can also use keyboard shortcuts:

- Press `Enter` to complete the block and generate a continuation.
- Use `Shift + Enter` to insert a newline.
- `Ctrl + Enter` on Linux/Windows or `Cmd + Enter` on macOS also submits as an alternate shortcut.

### Branching

Mir supports branching within a collection.

- Select a generated/model block, open Inspect, and use **Branch from this block** to set a branch anchor.
- You can also select a generated/model block directly in the stream and use **New branch from here**.
- The composer shows whether you are continuing from latest or from a branch anchor.
- Use **Use latest** in the composer to clear the anchor.
- Blocks with multiple children show a branch badge (for example, `2 branches`). Click that badge to cycle and jump between branch starts.

To roll a new generation from the same user prompt, select that user block and use **Retry generation**.

If a generation fails, Mir keeps the pending generated block and shows **Retry generation** on that block so you can retry without duplicating the user block.

### Customizing generation parameters

You can customize parameters passed to the model along with the context when asking it to generate a continuation. Currently, Mir exposes only temperature.

#### Temperature

The TEMP pill near the Add button lets you set the temperature for the next continuation.

Temperature controls how deterministic or varied the model output is. Lower values are more focused and repeatable; higher values are more exploratory.

## Inspect

The Inspect tab in the sidebar shows metadata about the selected collection or block.

The top area displays a compact summary meant for a quick scan, starting with the local time when the item was created.

For generated blocks, this area will also show the model name, the completion token count and the response latency.

This summary is followed by any actions applicable to that item type.

* Copy Collection: Copy all blocks in the selected collection as markdown. Blocks with a role "user" are blockquoted.
* Delete Collection: Delete the collection and all of its blocks. This action asks for a confirmation first.
* Copy Block: Copy the block's text.
* Branch from this block: Set the composer to continue from the selected block instead of the latest one.

This is then followed by various sections giving low-level details about the active item, whichever are applicable:

#### Block

- Time: Full local timestamp of the block.
- Role: The block role (user, assistant, system).
- Words: Word count for the block content.
- Characters: Character count for the block content.

#### Request (for generated blocks)

- Engine: The local engine which performed the inference (for local generations).
- Endpoint: The base URL of the inference provider (for remote generations).
- Model: The name of the model specified in the completion request.
- Temperature: Sampling temperature used by the request.

#### Response (for generated blocks)

- Model: The model used for the chat completion (shown when it differs from the requested model).
- Latency: The total time in milliseconds between sending the request and receiving the response.
- Prompt tokens: Number of tokens in the prompt.
- Completion tokens: Number of tokens in the generated completion.
- Total tokens: Total tokens used (prompt + completion).
- Finish reason: The reason the model stopped generating tokens. This will be `stop` if the model hit a natural stop point or a provided stop sequence, `length` if the maximum number of tokens specified in the request was reached, `tool_calls` if the model called a tool, and other provider specific values.
- Response ID: The provider's unique identifier for the generated completion.

## Export and Import

Mir stores your data locally in the app's container on your device.

You can use the export and import functionality in the Data section of Settings to export a snapshot to a JSON file and later import it back. You can use this as a backup mechanism, or to move your data between devices.

### Exporting data

1. Open Settings.
2. Under Data, click Export data.
3. Choose a location for the JSON file (Mir suggests a timestamped filename).

The export includes collections, blocks, and relationships. It does not include API keys, local settings, or other device‑specific data.

### Importing data

1. Open Settings.
2. In Data, click Import data.
3. Review the preview counts and confirm the import by pressing Import now.

Mir merges the import into your existing data:

- Records and relationships are additive.
- If an incoming record ID already exists, Mir keeps the current version and reports a conflict.
- If a relationship points to a missing or deleted record, Mir skips it.

If the imported data contains divergent continuations from the same parent block, those divergences are preserved and shown as branches.

This means import will not overwrite your current work or resurrect deleted content. If you need a clean slate, you will need to clear the local database before importing.

To summarize, the import is

- Safe and additive; it will only add what is new.
- Will not create duplicates; both records relationships are de‑duplicated by identity, so re‑imports are idempotent.
- And will show you a preview first, mentioning counts of what all is in the file that is being imported.

## Other features

- Automatic light/dark mode that follows the system's setting.
- Easy controls for customizing generation parameters for each block.
- Markdown and TeX math typesetting support.
- Keyboard friendly design, with handy and documented keyboard shortcuts for navigation and various functions.

## Keyboard shortcuts

| Action | Linux/Windows | macOS |
| --- | --- | --- |
| New Collection | Ctrl + N | Cmd + N |
| Open Settings | Ctrl + , | Cmd + , |
| Toggle Side Bar | Ctrl + B | Cmd + B |
| Toggle Collections | Ctrl + E | Cmd + E |
| Toggle Inspect | Ctrl + I | Cmd + I |
| Focus composer | Ctrl + L | Cmd + L |
| Select previous block | Up | Up |
| Select next block / Focus composer | Down | Down |
| Copy active block (no text selection) | Ctrl + C | Cmd + C |
| Clear selection / Blur composer | Esc | Esc |
| Scroll to top | Ctrl + Up | Cmd + Up |
| Scroll to end | Ctrl + Down | Cmd + Down |
| Generate continuation | Enter | Enter |
| New line | Shift + Enter | Shift + Enter |
| Generate continuation (alternate shortcut) | Ctrl + Enter | Cmd + Enter |
